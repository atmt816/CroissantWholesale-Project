<head>
  <%- include('../partials/head'); %>
</head>


<style>
  .top-buffer {
    margin-top: 60px;
  }
</style>

<body class="container">
  <header>
    <%- include('../partials/header'); %>
  </header>

  <main class="container pt-5">
    <div class="p-5 mb-4 bg-white rounded-3 top-buffer">
      <h2 class="text-center pb-2">
        Edit Invoice
      </h2>
      <form action="/invoices/update" method="post">
        <h5 class="pb-1 pt-2">Invoice Information</h5>
        <div class="container pt-2">
          <div class="row">
            <div class="col-sm">
              Invoice Number
              <p class="pt-1">
                <%= invoice_data[0].invoice_id%>
              </p>
            </div>
            <div class="col-sm">
              Customer
              <p class="pt-1">
                <%= customer_info[0].business_name %>
              </p>
            </div>
            <div class="col-sm">
              Date Generated
              <p class="pt-1">
                <%= dates[0].date_produced %>
              </p>
            </div>
            <div class="col-sm">
              Total
              <p class="pt-1">
                $<%= sumtotal %>
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
              Delivery Address
              <p class="pt-1">
                <%= customer_info[0].street%>
              </p>
            </div>
            <div class="col-sm">
              City
              <p class="pt-1">
                <%= customer_info[0].city %>
              </p>
            </div>
            <div class="col-sm">
              State
              <p class="pt-1">
                <%= customer_info[0].state_code_id %>
              </p>
            </div>
            <div class="col-sm">
              Zip Code
              <p class="pt-1">
                <%= customer_info[0].zipcode %>
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
              <br>
              Delivery Date
              <p class="pt-1">
                <%= dates[0].delivery_date%>
                
              </p>
            </div>
            <div class="col-sm">
              <br>
              Phone Number
              <p class="pt-1">
                <%= customer_info[0].phone%>
              </p>
            </div>
            <div class="col-sm">
              <br>
              Email
              <p class="pt-1">
                <%= customer_info[0].email %>
              </p>
            </div>
          </div>
        </div>
        <hr class="hr hr-blurry" />
        <h5>Order Information</h5>
        <table class="table">
          <thead>
            <tr>
              <th>Product Name</th>
              <th>Quantity</th>
              <th>Price Per Unit</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            <% order_info.forEach(function(order_info, order) { %>
              <tr>
                <td>
                  <%= order_info.product_name %>
                </td>
                <td>
                  <%= order_info.quantity %>
                </td>
                <td>
                  $<%= order_info.price_per_unit %>
                </td>
                <td>
                  $<%= order_info.total %>
                </td>
              </tr>
              <% }); %>
          </tbody>
        </table>
    </div>

    </div>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
      Edit Invoice
  </button>

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">Edit Invoice</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="/invoices/update" method="post" class="row g-3">
                  <div class="col-md-6 mb-3">
                    <input class="form-control" name="invoice_id" type="hidden" id="invoice_id" value=<%=invoice_data[0].invoice_id%>>
                    <label for="payment_status" class="form-label">Payment Status</label>
                    <select id="payment_status" name="payment_status" class="form-select">
                      <option selected>Pending</option>
                      <option>Paid</option>
                      <option>Cancelled</option>
                    </select>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="date_paid" class="form-label">Date Paid</label>
                    <input type="type" class="form-control" name="date_paid" id="date_paid" value=<%if (invoice_data[0].date_paid) { %>
                                                                                                  <%= moment(invoice_data[0].date_paid).format('YYYY-MM-DD') %> 
                                                                                                  <% } else { %><% } %>>
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Create New Item</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    </div>
    <footer>
      <%- include('../partials/footer'); %>
    </footer>
  </main>

</body>