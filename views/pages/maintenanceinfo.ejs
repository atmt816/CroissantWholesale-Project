<head>
    <%- include('../partials/head'); %>
</head>


<style>
    .top-buffer { margin-top: 60px;}
</style>

<body class="container">
    <header>
        <%- include('../partials/header'); %> 
    </header>
    
    <main class="container pt-5"> 
        <div class="p-5 mb-4 bg-white rounded-3 top-buffer">
            <h2 class="text-center">
              Maintenance Logs
            </h2>
            <a href="/maintenance" class="link-primary pb-4">Go Back</a>
            <h5 class= "pb-1 pt-2">Maintenance Information</h5>
            <div class="container pt-2">
              <div class="row">
                <div class="col-sm">
                  Maintenance Log ID
                  <p class="pt-1"><%= logs_data[0].log_id %></p>
                </div>
                <div class="col-sm">
                  License Plate
                  <p class="pt-1">
                    <%= logs_data[0].license_plate %>
                  </p>
                </div>
                <div class="col-sm">
                  Date
                  <p class="pt-1">
                    <%if (logs_data[0].date) { %>
                      <% const date = moment(logs_data[0].date).add(1, 'day'); %>
                      <%= date.format('MMMM Do YYYY') %>
                      <% } else { %><% } %>
                  </p>
                </div>
              </div>
            
            </div>
            
            <hr class="hr hr-blurry" />
            <h5>Contact Information</h5>
            <div class="container pt-2">
              <div class="row">
                <div class="col-sm">
                  Auto Shop 
                  <p class="pt-1"><%= logs_data[0].garage_name %> </p>
                </div>
                <div class="col-sm">
                  Phone Number
                  <p class="pt-1">
                     <%= logs_data[0].phone %>
                  </p>
                </div>
                <div class="col-sm">
                  Address 
                  <p class="pt-1">
                    <%= logs_data[0].street %> <%= logs_data[0].city %>, <%= logs_data[0].state_code_id %> <%= logs_data[0].zipcode %>
                  </p>
                </div>   
                  
                </div>
                <div class="row">
                <div class="col-sm">
                  Maintenance Status
                  <p class="pt-1">
                    <%= logs_data[0].status %>
                  </p>
                </div>
                <div class="col-sm">
                  Additional Notes
                  <p class="pt-1">
                    <%= logs_data[0].note %>
                  </p>
                </div>
              </div>
            </div>
            </div>
            <div class="btn-group" role="group" >
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
              Edit
            </button>
            
            
            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
              Delete
            </button>
            
            
          </div>
            <!-- Edit Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalLabel">Edit Maintenance Log</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <form action="/maintenance/update" method="post" class="row g-3">
                      <input class="form-control" name="log_id" id="log_id" type="hidden" value=<%=logs_data[0].log_id %>> 
                      <div class="col-md-6 pb-2">
                        <label for="date" class="form-label">Date</label>
                        <input type="text" class="form-control" name="date" id="date" value= <%if (logs_data[0].date) { %>
                                                                                              <% const date = moment(logs_data[0].date).add(1, 'day'); %>
                                                                                              <%= date.format('YYYY-MM-DD') %>
                                                                                              <% } else { %><% } %>>
                      </div>
                      <hr class="hr">
                      <div class="col-md-6 ">
                        <label for="status" class="pb-2">Maintenance Status</label>
                        <select name="status" id="status" class="form-select">
                          <option selected>In-Progress</option>
                          <option>Completed</option>
                          <option>Cancelled</option>
                        </select>
                      </div>
                      <div class="col-md-6">
                        <label for="note" class="form-label">Additional Notes</label>
                        <input type="note" class="form-control" id="note" name="note" value= "<%= logs_data[0].note %>">
                      </div>
                      
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Update Log</button>
                    </form>

        </div>
        </div>
        </div>
        </div>
         <!-- Edit Modal -->
         <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form action="/maintenance/delete" method="post" class="row g-3">
                  <input class="form-control" name="log_id" id="log_id" type="hidden"  value="<%=logs_data[0].log_id %>"> 
                  <h3 class="text-center">Are you sure you want to delete?</h3>
                  
              </div>
                
                  <div class="text-center pb-5">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                  <button type="submit" class="btn btn-danger">Confirm</button>
                  </div>
                
                </form>

    </div>
    </div>
    </div>
        <footer>
          <%- include('../partials/footer'); %>
      </footer>
        </main>
</body>
